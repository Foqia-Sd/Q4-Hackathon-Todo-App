# Default values for todo-app Helm chart

# Global configuration
global:
  environment: development

# Frontend configuration
frontend:
  name: frontend
  replicaCount: 1
  image:
    repository: todo-frontend
    tag: latest
    pullPolicy: Never  # Use local images for Minikube
  port: 3000
  service:
    type: LoadBalancer
    port: 3000
    targetPort: 3000
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  env:
    - name: NODE_ENV
      value: "production"
    - name: NEXT_PUBLIC_API_URL
      value: "http://backend:8000"

# Backend configuration
backend:
  name: backend
  replicaCount: 1
  image:
    repository: todo-backend
    tag: fixed
    pullPolicy: Never  # Use local images for Minikube
  port: 8000
  service:
    type: ClusterIP
    port: 8000
    targetPort: 8000
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 250m
      memory: 256Mi
  env:
    - name: PYTHONUNBUFFERED
      value: "1"
    - name: DATABASE_URL
      value: "sqlite:///./todo_app.db"

# Namespace
namespace: default

# Labels to apply to all resources
commonLabels:
  app: todo-app
  version: "1.0"
  managed-by: helm

# Annotations
commonAnnotations:
  description: "AI-powered Todo application deployed with Helm"

# Ingress configuration
ingress:
  enabled: false
  className: ""
  annotations:
    {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: todo.local
      paths:
        - path: /
          pathType: Prefix
          serviceName: frontend
          servicePort: 3000
        - path: /api
          pathType: Prefix
          serviceName: backend
          servicePort: 8000
  tls: []
  #  - secretName: todo-tls
  #    hosts:
  #      - todo.local
